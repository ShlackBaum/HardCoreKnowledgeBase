# BASIC INSTRUCTION: Архитектура и Эксплуатация Базы Знаний

> **Версия:** 1.0 (MVP Golden Standard)
> **Стек:** GitHub (Storage) + GitBook (Frontend) + Google Apps Script (Telegram Bot)

---

## 1. Архитектура Системы

### Принцип "Docs as Code"
Мы не храним знания в визуальном редакторе. **GitHub — единственный источник правды.**
*   `main` — основная ветка. Всё, что попадает сюда, автоматически летит на сайт GitBook.
*   Изменения на сайте (через админку GitBook) нежелательны, так как могут вызвать конфликты.

### Структура папок
Мы поддерживаем "Золотой стандарт" чистоты. Мусорные папки удалены.

```text
/
├── .gitignore          <-- Защита от секретов и бинарников
├── SUMMARY.md          <-- ОГЛАВЛЕНИЕ МЕНЮ (Самый важный файл)
├── README.md           <-- Главная страница
├── BASIC_INSTRUCTION.md <-- Этот файл
│
├── chaos/              <-- INBOX для бота (сюда падают заметки)
│
├── client-relations/   <-- Взаимодействие с клиентом
├── conversion-cro/     <-- Конверсия
├── link-building/      <-- Ссылочное
├── other/              <-- Разное
├── pf-google/          <-- ПФ Google
├── pf-yandex/          <-- ПФ Яндекс
├── seo-strategy/       <-- Стратегия
├── technical-seo/      <-- Техничка
│
└── tools/              <-- Скрипты автоматизации (код бота)
```

---

## 2. Работа с контентом

### Способ А: "Быстрый вброс" (Telegram Бот)
Для сохранения идей "на лету" используем бота **@HardCoreKnowledgeAppend_bot**.

*   **Личка:** Пишем любой текст -> Бот сохраняет.
*   **Группы:** Пишем `@HardCoreKnowledgeAppend_bot Текст идеи...` -> Бот сохраняет.
*   **Форматирование:** Бот понимает ссылки, жирный шрифт, курсив.
*   **Результат:**
    1.  Создается файл в папке `chaos/` с именем `dd-mm-yy-translit-title.md`.
    2.  Автоматически добавляется ссылка в меню `SUMMARY.md` под раздел "ХАОС".

### Способ Б: "Редактура" (GitHub)
Для создания регламентов и правки статей.

1.  Заходим в репозиторий на GitHub.
2.  Находим нужный файл (или создаем новый).
3.  Жмем ✏️ (Edit).
4.  Пишем в Markdown.
5.  **Commit changes** (зеленая кнопка).
    *   Если создали НОВЫЙ файл — обязательно добавьте ссылку на него в `SUMMARY.md`, иначе он не появится в меню GitBook!

---

## 3. Автоматизация (Telegram Bot)

Бот работает на **Google Apps Script** (Serverless). Это бесплатно и надежно.

*   **Исходный код:** Лежит в `tools/google-apps-script-bot/code_for_google.js`.
*   **Где крутится:** [script.google.com](https://script.google.com/) (в вашем Google аккаунте).

### Как обновить бота (если поменяли код)?
1.  Скопировать новый код из `code_for_google.js`.
2.  Вставить в редактор на script.google.com.
3.  **КРИТИЧНО ВАЖНО:** Нажать `Deploy` -> `Manage deployments` -> `Edit` -> **Version: New version** -> `Deploy`.
4.  Только после создания "Новой версии" изменения вступают в силу.

### Секретные ключи (Не палить!)
В скрипте используются два токена. Если они утекут — бот сломается.
1.  `GITHUB_TOKEN`: Права `repo`. Если протух — генерируем новый на GitHub и вставляем в скрипт.
2.  `TELEGRAM_BOT_TOKEN`: От @BotFather.

---

## 4. Устранение проблем (Troubleshooting)

### Проблема: "На сайте иероглифы вместо текста"
*   **Причина:** Файл сохранен в кодировке Windows (UTF-16/CP1251).
*   **Решение:** Пересохранить файл в **UTF-8**. (Бот делает это автоматически).

### Проблема: "Бот молчит"
1.  Проверьте `Deploy` -> `Executions` в Google Script.
    *   Если `Failed` — смотрите ошибку.
    *   Частая причина: **GitHub Token отозван**. (GitHub сжигает токены, если находит их в публичном чате).
2.  Сгенерируйте новый токен и обновите скрипт.

### Проблема: "Бот не видит сообщения в группе"
1.  Идите в @BotFather.
2.  `/mybots` -> Settings -> **Group Privacy**.
3.  Выключите (Turn OFF).
4.  Передобавьте бота в чат.

### Проблема: "GitBook не обновляется"
1.  Зайдите в настройки GitBook -> Git Sync.
2.  Убедитесь, что ветка стоит **main** (не master).
3.  Нажмите Sync Now.
4.  В крайнем случае: Disconnect -> Connect заново.

---

## 5. Полезные ссылки
*   [GitHub Репозиторий](https://github.com/ShlackBaum/HardCoreKnowledgeBase)
*   [Сайт Базы Знаний](https://hardcoreseo.gitbook.io/)
*   [Панель Google Script](https://script.google.com/)

